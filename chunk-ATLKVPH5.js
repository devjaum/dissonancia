import{a as I}from"./chunk-JWSATTTX.js";import{c as z,j as A}from"./chunk-ZTXPRHSA.js";import{$ as P,A as g,B as f,Ba as S,E as d,Ea as w,M as r,Q as O,R as T,V as v,Y as u,Z as n,_ as s,aa as C,ba as l,ca as h,ea as M,ga as a,ha as c,ia as b,ma as E,ta as _,w as x,ya as k,za as y}from"./chunk-Q6XP5ZE4.js";function F(p,t){if(p&1){let e=C();n(0,"li",3),l("click",function(){let o=g(e).$implicit,m=h();return f(m.removePointTalent(m.getTalent(o)))}),n(1,"p")(2,"b"),a(3),s(),P(4,"br"),n(5,"small"),a(6),s()()()}if(p&2){let e,i=t.$implicit,o=h();r(3),c(i),r(3),c((e=o.getTalent(i))==null?null:e.description)}}function V(p,t){p&1&&(n(0,"li",15)(1,"p"),a(2,"Nenhum talento selecionado."),s()())}function B(p,t){if(p&1){let e=C();n(0,"li",16),l("mouseover",function(){let o=g(e).$implicit,m=h();return f(m.showDescription(o))})("mouseout",function(){let o=g(e).$implicit,m=h();return f(m.hideDescription(o))})("click",function(){let o=g(e).$implicit,m=h();return f(m.addTalent(o))}),n(1,"b"),a(2),s(),n(3,"p",17),a(4),s(),P(5,"div",18),s()}if(p&2){let e=t.$implicit,i=h();u("id",e.name),r(2),c(e.name),r(),M("color",e.peso<=i.pointsT()?"#80cbc4":"#ef5350"),u("id",E("cost-",e.name)),r(),b(" Custo: ",e.peso," "),r(),u("id",e.name+e.peso)}}var D=class p{constructor(t){this.router=t}dbService=x(A);docId=null;auth=x(z);userEmail=d("");talent=I;listaTalent=d([]);forca=d(2);destreza=d(2);constituicao=d(2);inteligencia=d(2);sabedoria=d(2);carisma=d(2);pointsAtt=d(8);pointsT=d(10);vidaExtra=0;vida=_(()=>5+this.constituicao()*10+this.forca()*5+this.vidaExtra);shinsu=_(()=>4+this.inteligencia()*12+this.sabedoria()*6);energia=_(()=>1+this.destreza()*3+this.carisma()*2);stts=d([]);ngStts(){this.stts().length>0&&(this.forca.set(this.stts()[0]),this.destreza.set(this.stts()[1]),this.constituicao.set(this.stts()[2]),this.inteligencia.set(this.stts()[3]),this.sabedoria.set(this.stts()[4]),this.carisma.set(this.stts()[5]),this.pointsAtt.set(this.stts()[6]),this.pointsT.set(this.stts()[7]),this.listaTalent.set(this.stts()[8]),this.vidaExtra=this.stts()[9])}ngAfterViewInit(){this.listaTalent().forEach(t=>{let e=this.getTalent(t);e&&this.mudarCorTalent(e)}),this.ngStts()}ngOnInit(){this.talent.sort((t,e)=>t.peso-e.peso),this.dbService.getCharacterByEmail().subscribe(t=>{let e=this.auth.currentUser;e&&e.email&&this.userEmail.set(e.email),t?(this.docId=t.docId,t.status&&t.status.length>=6&&(this.forca.set(t.status[0]),this.destreza.set(t.status[1]),this.constituicao.set(t.status[2]),this.inteligencia.set(t.status[3]),this.sabedoria.set(t.status[4]),this.carisma.set(t.status[5]),this.pointsAtt.set(10-(this.forca()+this.destreza()+this.constituicao()+this.inteligencia()+this.sabedoria()+this.carisma()-12))),t.talent&&(this.listaTalent.set(t.talent),setTimeout(()=>this.atualizarVisuaisTalentos(),100),this.pointsT.set(10-t.talent.reduce((i,o)=>{let m=this.talent.find(N=>N.name===o);return i+(m?m.peso:0)},0)))):console.log("Nenhum personagem encontrado para este e-mail.")}),this.talent.sort((t,e)=>t.peso-e.peso)}atualizarVisuaisTalentos(){this.listaTalent().forEach(t=>{let e=this.getTalent(t);e&&this.mudarCorTalent(e)})}showDescription(t){let e=document.getElementById(t.name+t.peso);e&&(e.innerText=t.description,e.classList.add("showDescription"))}hideDescription(t){if(!document.getElementById(t.name+t.peso))return;let e=document.getElementById(t.name+t.peso);e&&(e.innerText="",e.classList.remove("showDescription"))}addTalent(t){if(this.listaTalent().includes(t.name)){this.removePointTalent(t);return}t.peso>this.pointsT()||(this.pointsT.set(this.pointsT()-t.peso),this.listaTalent.set([...this.listaTalent(),t.name]),this.mudarCorTalent(t),t.name==="Prod\xEDgio"&&(this.forca.set(this.forca()+1),this.destreza.set(this.destreza()+1),this.constituicao.set(this.constituicao()+1),this.inteligencia.set(this.inteligencia()+1),this.sabedoria.set(this.sabedoria()+1),this.carisma.set(this.carisma()+1)),t.name==="Vigoroso"&&(this.vidaExtra=10))}removePointTalent(t){this.pointsT.set(this.pointsT()+t.peso),this.listaTalent.set(this.listaTalent().filter(e=>e!==t.name)),this.removerCorTalent(t),t.name==="Prod\xEDgio"&&(this.forca.set(this.forca()-1),this.destreza.set(this.destreza()-1),this.constituicao.set(this.constituicao()-1),this.inteligencia.set(this.inteligencia()-1),this.sabedoria.set(this.sabedoria()-1),this.carisma.set(this.carisma()-1)),t.name==="Vigoroso"&&(this.vidaExtra=0)}mudarCorTalent(t){let e=document.getElementById(t.name),i=document.getElementById("cost-"+t.name);i&&e&&(e.style.backgroundColor="#2e352cff",e.style.color="#FFF",i.style.color="#53eed4ff")}removerCorTalent(t){let e=document.getElementById(t.name),i=document.getElementById("cost-"+t.name);i&&e&&(e.style.backgroundColor="#2c2c35",e.style.color="#FFF",i.style.color="#80cbc4")}addPoint(t){if(this.pointsAtt()>0)switch(t){case"forca":this.forca()<5&&(this.forca.set(this.forca()+1),this.pointsAtt.set(this.pointsAtt()-1));break;case"destreza":this.destreza()<5&&(this.destreza.set(this.destreza()+1),this.pointsAtt.set(this.pointsAtt()-1));break;case"constituicao":this.constituicao()<5&&(this.constituicao.set(this.constituicao()+1),this.pointsAtt.set(this.pointsAtt()-1));break;case"inteligencia":this.inteligencia()<5&&(this.inteligencia.set(this.inteligencia()+1),this.pointsAtt.set(this.pointsAtt()-1));break;case"sabedoria":this.sabedoria()<5&&(this.sabedoria.set(this.sabedoria()+1),this.pointsAtt.set(this.pointsAtt()-1));break;case"carisma":this.carisma()<5&&(this.carisma.set(this.carisma()+1),this.pointsAtt.set(this.pointsAtt()-1));break}}removePoint(t){switch(t){case"forca":this.forca()>0&&(this.forca.set(this.forca()-1),this.pointsAtt.set(this.pointsAtt()+1));break;case"destreza":this.destreza()>0&&(this.destreza.set(this.destreza()-1),this.pointsAtt.set(this.pointsAtt()+1));break;case"constituicao":this.constituicao()>0&&(this.constituicao.set(this.constituicao()-1),this.pointsAtt.set(this.pointsAtt()+1));break;case"inteligencia":this.inteligencia()>0&&(this.inteligencia.set(this.inteligencia()-1),this.pointsAtt.set(this.pointsAtt()+1));break;case"sabedoria":this.sabedoria()>0&&(this.sabedoria.set(this.sabedoria()-1),this.pointsAtt.set(this.pointsAtt()+1));break;case"carisma":this.carisma()>0&&(this.carisma.set(this.carisma()-1),this.pointsAtt.set(this.pointsAtt()+1));break}}getTalent(t){return this.talent.find(e=>e.name===t)}reset(){let t=0;this.listaTalent().forEach(e=>{let i=this.getTalent(e);i&&i.name==="Prod\xEDgio"&&(this.forca.set(3),this.destreza.set(3),this.constituicao.set(3),this.inteligencia.set(3),this.sabedoria.set(3),this.carisma.set(3),this.pointsAtt.set(8),t=1)}),t===0&&(this.forca.set(2),this.destreza.set(2),this.constituicao.set(2),this.inteligencia.set(2),this.sabedoria.set(2),this.carisma.set(2),this.pointsAtt.set(8))}save(){if(this.stts.set([this.forca(),this.destreza(),this.constituicao(),this.inteligencia(),this.sabedoria(),this.carisma(),this.pointsAtt(),this.pointsT(),this.listaTalent(),this.vidaExtra]),!this.docId){let e={email:this.userEmail(),password:this.userEmail().split("@")[0]+"@rpg",status:[this.forca(),this.destreza(),this.constituicao(),this.inteligencia(),this.sabedoria(),this.carisma()],talent:this.listaTalent()};this.dbService.saveUserData(e).then(()=>{alert("Salvo no Firebase com sucesso!"),this.router.navigate(["/lore"])}).catch(i=>console.error("Erro ao salvar:",i,e));return}let t={status:[this.forca(),this.destreza(),this.constituicao(),this.inteligencia(),this.sabedoria(),this.carisma()],talent:this.listaTalent()};this.dbService.updateCharacter(this.docId,t).then(()=>{alert("Salvo no Firebase com sucesso!"),this.router.navigate(["/lore"])}).catch(e=>console.error("Erro ao salvar:",e))}static \u0275fac=function(e){return new(e||p)(O(w))};static \u0275cmp=T({type:p,selectors:[["app-create"]],decls:99,vars:16,consts:[[1,"atributos"],[1,"stts"],[1,"controls"],[3,"click"],[1,"btn"],["id","reset",3,"click"],[1,"build"],[1,"build-tlts"],[3,"click",4,"ngFor","ngForOf"],["style","justify-content: center; opacity: 0.5;",4,"ngIf"],[1,"talentos"],[1,"tlts"],[3,"id","mouseover","mouseout","click",4,"ngFor","ngForOf"],[1,"btn-salvar"],[1,"btnSalvar",3,"click"],[2,"justify-content","center","opacity","0.5"],[3,"mouseover","mouseout","click","id"],[2,"font-size","0.8rem",3,"id"],[1,"tooltip-content",3,"id"]],template:function(e,i){e&1&&(n(0,"main")(1,"section",0)(2,"h2"),a(3,"Atributos"),s(),n(4,"div",1)(5,"h3"),a(6,"Vida: "),n(7,"span"),a(8),s()(),n(9,"h3"),a(10,"Shinsu: "),n(11,"span"),a(12),s()(),n(13,"h3"),a(14,"Energia: "),n(15,"span"),a(16),s()(),n(17,"h3"),a(18),s()(),n(19,"ul")(20,"li")(21,"span"),a(22,"For\xE7a (HP+)"),s(),n(23,"div",2)(24,"span"),a(25),s(),n(26,"button",3),l("click",function(){return i.removePoint("forca")}),a(27,"-"),s(),n(28,"button",3),l("click",function(){return i.addPoint("forca")}),a(29,"+"),s()()(),n(30,"li")(31,"span"),a(32,"Destreza (PE++)"),s(),n(33,"div",2)(34,"span"),a(35),s(),n(36,"button",3),l("click",function(){return i.removePoint("destreza")}),a(37,"-"),s(),n(38,"button",3),l("click",function(){return i.addPoint("destreza")}),a(39,"+"),s()()(),n(40,"li")(41,"span"),a(42,"Constitui\xE7\xE3o (HP++)"),s(),n(43,"div",2)(44,"span"),a(45),s(),n(46,"button",3),l("click",function(){return i.removePoint("constituicao")}),a(47,"-"),s(),n(48,"button",3),l("click",function(){return i.addPoint("constituicao")}),a(49,"+"),s()()(),n(50,"li")(51,"span"),a(52,"Intelig\xEAncia (Shinsu++)"),s(),n(53,"div",2)(54,"span"),a(55),s(),n(56,"button",3),l("click",function(){return i.removePoint("inteligencia")}),a(57,"-"),s(),n(58,"button",3),l("click",function(){return i.addPoint("inteligencia")}),a(59,"+"),s()()(),n(60,"li")(61,"span"),a(62,"Sabedoria (Shinsu+)"),s(),n(63,"div",2)(64,"span"),a(65),s(),n(66,"button",3),l("click",function(){return i.removePoint("sabedoria")}),a(67,"-"),s(),n(68,"button",3),l("click",function(){return i.addPoint("sabedoria")}),a(69,"+"),s()()(),n(70,"li")(71,"span"),a(72,"Carisma (PE+)"),s(),n(73,"div",2)(74,"span"),a(75),s(),n(76,"button",3),l("click",function(){return i.removePoint("carisma")}),a(77,"-"),s(),n(78,"button",3),l("click",function(){return i.addPoint("carisma")}),a(79,"+"),s()()()(),n(80,"div",4)(81,"button",5),l("click",function(){return i.reset()}),a(82,"Restaurar Padr\xF5es"),s()()(),n(83,"section",6)(84,"h2"),a(85,"Build Atual"),s(),n(86,"div",7)(87,"ul"),v(88,F,7,2,"li",8)(89,V,3,0,"li",9),s()()(),n(90,"section",10)(91,"h2"),a(92),s(),n(93,"div",11)(94,"ul"),v(95,B,6,8,"li",12),s()()(),n(96,"div",13)(97,"button",14),l("click",function(){return i.save()}),a(98,"Salvar"),s()()()),e&2&&(r(8),c(i.vida()),r(4),c(i.shinsu()),r(4),c(i.energia()),r(),M("color",i.pointsAtt()<1?"#ef5350":"inherit"),r(),b(" Pontos: ",i.pointsAtt()," "),r(7),c(i.forca()),r(10),c(i.destreza()),r(10),c(i.constituicao()),r(10),c(i.inteligencia()),r(10),c(i.sabedoria()),r(10),c(i.carisma()),r(13),u("ngForOf",i.listaTalent()),r(),u("ngIf",i.listaTalent().length===0),r(3),b("Dispon\xEDveis - Pontos: ",i.pointsT()),r(3),u("ngForOf",i.talent))},dependencies:[S,k,y],styles:["*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}main[_ngcontent-%COMP%]{display:grid;grid-template-columns:350px 1fr;grid-template-rows:auto auto;gap:20px;padding:20px;max-width:1200px;margin:0 auto}section[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:var(--border-radius);padding:20px;box-shadow:var(--shadow);border:1px solid #333}h2[_ngcontent-%COMP%]{margin-top:0;border-bottom:2px solid var(--accent-color);padding-bottom:10px;margin-bottom:20px;font-size:1.5rem;text-transform:uppercase;letter-spacing:1px;color:var(--accent-color);text-align:center}h3[_ngcontent-%COMP%]{margin:5px 0;font-weight:500}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}button[_ngcontent-%COMP%]{cursor:pointer;font-family:var(--font-main);transition:all .2s ease}.atributos[_ngcontent-%COMP%]{grid-column:1 / 2;grid-row:1 / 2}.stts[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px;background:#0003;padding:15px;border-radius:var(--border-radius);margin-bottom:20px;text-align:center}.stts[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}.atributos[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 10px;border-bottom:1px solid #333}.atributos[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{border-bottom:none}.atributos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:1px solid var(--accent-color);background:transparent;color:var(--accent-color);font-weight:700;font-size:1.2rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;margin-left:5px}.atributos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--accent-color);color:var(--bg-color);transform:scale(1.1)}.atributos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn[_ngcontent-%COMP%]{margin-top:20px}#reset[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#333;color:#fff;border:none;border-radius:var(--border-radius);font-weight:700;text-transform:uppercase}#reset[_ngcontent-%COMP%]:hover{background-color:var(--danger-color)}.build[_ngcontent-%COMP%]{grid-column:2 / 3;grid-row:1 / 2;display:flex;flex-direction:column}.build-tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:10px}.build-tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{background:#4db6ac1a;border:1px solid var(--accent-color);border-radius:var(--border-radius);padding:10px 15px}.build-tlts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.build-tlts[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--accent-color);font-size:1rem}.talentos[_ngcontent-%COMP%]{grid-column:1 / -1;grid-row:2 / 3;scrollbar-width:thin;scrollbar-color:var(--accent-color) transparent;height:500px;overflow-y:scroll}.tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}.tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;background-color:#2c2c35;border:1px solid #444;border-radius:var(--border-radius);padding:15px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;cursor:pointer;transition:transform .2s,border-color .2s}.tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:var(--accent-color);background-color:#32323d}.tlts[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;pointer-events:none}",'.showDescription[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;transform:translate(-50%);width:220px;background-color:#fff;color:#000;padding:10px;border-radius:4px;font-size:.85rem;box-shadow:0 5px 15px #00000080;z-index:100;pointer-events:none;margin-bottom:10px;border:2px solid var(--accent-color)}.showDescription[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:var(--accent-color) transparent transparent transparent}.btnSalvar[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:var(--accent-color);color:var(--bg-color);border:none;border-radius:var(--border-radius);font-weight:700;text-transform:uppercase;margin-top:10px;max-width:220px}.btnSalvar[_ngcontent-%COMP%]:hover{background-color:var(--accent-hover)}.btnSalvar[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-salvar[_ngcontent-%COMP%]{display:flex;grid-column:1 / -1;justify-content:center;align-items:center}@media (max-width: 768px){main[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stts[_ngcontent-%COMP%]{grid-template-columns:1fr}}#null[_ngcontent-%COMP%]{position:relative;background-color:#1a0033;border:3px solid #ff00ff;cursor:not-allowed}#null[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], #null[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;z-index:5;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_text-glitch 1s linear infinite alternate}@keyframes _ngcontent-%COMP%_text-glitch{0%{transform:translate(0)}20%{transform:translate(-2px,2px)}40%{transform:translate(-2px,-2px)}60%{transform:translate(2px,2px)}80%{transform:translate(2px,-2px)}to{transform:translate(0)}}#null[_ngcontent-%COMP%]:before{content:attr(id);position:absolute;top:15px;left:15px;width:100%;height:100%;color:#0ff;z-index:4;opacity:.7;animation:_ngcontent-%COMP%_glitch-shadow .5s infinite alternate-reverse}#null[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:2px;height:2px;background:#f0f;z-index:4;box-shadow:10px 5px #0ff,-15px -8px #0ff,25px 12px #f0f,-5px 20px #f0f,30px -10px #0ff,-40px 15px #f0f;animation:_ngcontent-%COMP%_particle-burst 1s linear infinite}@keyframes _ngcontent-%COMP%_glitch-shadow{0%{transform:translate(0);filter:blur(0)}25%{transform:translate(1px,-1px);filter:blur(.5px)}50%{transform:translate(-1px,2px);filter:blur(1px)}75%{transform:translate(2px,1px);filter:blur(.5px)}to{transform:translate(-2px,-2px);filter:blur(0)}}@keyframes _ngcontent-%COMP%_particle-burst{0%{transform:translate(-50%,-50%) scale(0);opacity:1}50%{transform:translate(-50%,-50%) scale(2);opacity:.7}75%{transform:translate(-50%,-50%) scale(8);opacity:0}}']})};export{D as CreatePerso};
